<!DOCTYPE html>
<html lang="en">

    <head><title>Podman on Guix &ndash; Welcome to Entroponaut</title>
<meta name="description" content="Hugo Buddelmeijer&#39;s website.">

<meta name="viewport" content="width=device-width, initial-scale=1">
<meta charset="UTF-8"/>



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.9.4/css/academicons.min.css" integrity="sha512-IW0nhlW5MgNydsXJO40En2EoCkTTjZhI3yuODrZIc8cQ4h1XcF53PsqDHa09NqnkXuIe0Oiyyj171BqZFwISBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />


<link rel="stylesheet" href="/css/palettes/base16-dark.css">
<link rel="stylesheet" href="/css/risotto.css">
<link rel="stylesheet" href="/css/custom.css">










</head>

    <body>
        <div class="page">

            <header class="page__header"><nav class="page__nav main-nav">
    <ul>
      <li class="nomarker"><h1 class="page__logo"><a href="/" class="page__logo-inner">Welcome to Entroponaut</a></h1></li>
    
    
    <li class="main-nav__item"><a class="nav-main-item" href="/about/" title="">About</a></li>
    
    <li class="main-nav__item"><a class="nav-main-item active" href="/post/" title="Posts">Posts</a></li>
    
    </ul>
</nav>

</header>

            <section class="page__body">
    <header class="content__header">
        <h1>Podman on Guix</h1>
    </header>
    <div class="content__body">
        <h2 id="podman-on-guix">Podman on Guix</h2>
<p>Today was the day to switch from Docker to Podman!</p>
<p>This is the first article in the sharpening-the-saw series. Personally stories about keeping your tools up-to-date.</p>
<p>The trigger to move away from docker was fairly trivial: I <a href="https://github.com/tcort/markdown-link-check/pull/440">couldn&rsquo;t create a volume from <code>.</code></a> using docker 20.10. It was possible to use <code>$(pwd)</code> instead of a period, but it was the thought that mattered. Then it became clear that <a href="https://endoflife.date/docker-engine">docker engine 20.10 is end-of-life since December 2023</a>&hellip;</p>
<p>I already tried some half hearted attempts of updating docker in Guix, but that turned out too difficult, due to circular dependencies if I recall correctly. In fact, it was pretty difficult to keep docker and docker-compose running at all on Guix, <a href="https://unix.stackexchange.com/q/698811/160100">my <code>config.scm</code> was full with inferiors</a>.</p>
<p>Furthermorer, podman supposedly had a rootless mode now, which I was excited to try, it didn&rsquo;t feel right to have these privilidged containers on my pristine Guix environment!</p>
<p>It took me a little while to find the right documentation. The internet pointed me to an <a href="https://jointhefreeworld.org/blog/articles/gnu-linux/podman-root-less-guix/index.html">excellent blog by Josep Bigorra</a>, which made me confident the switch is possible.
But that solition wasn&rsquo;t Guixy enough for me, writing files instead of having the configuration directly in scheme.</p>
<p>Luckily, I&rsquo;m doing this exercise at exactly the right time, because <a href="https://guix.gnu.org/manual/devel/en/html_node/Miscellaneous-Services.html#index-Rootless-Podman">improved podman support landed in Guix just last month</a>. And it is pretty Guixy, essentially just this:</p>
<pre tabindex="0"><code class="language-guile" data-lang="guile">           (service rootless-podman-service-type
                    (rootless-podman-configuration
                     (subgids
                      (list (subid-range (name &#34;hugo&#34;))))
                     (subuids
                      (list (subid-range (name &#34;hugo&#34;))))))
</code></pre><p>So now I&rsquo;m finally running all my containers through podman!</p>
<p>One surprising thing is that all the mounted volumes are owned by root. But that is probably fine, because being root in the container is perfectly harmless, since that doesn&rsquo;t mean root access on the host anymore!</p>
<p>I use containers for development work, mounting volumes from the host with code repositories and such. This required the user in the container to be the same as the user outside the container, making reusing the same <del>Dockerfile</del> Containerfile non-trivial.</p>
<p>Instead, I&rsquo;ll experiment with running everything in the containers as &lsquo;root&rsquo; for a while.</p>

    </div>
    <footer class="content__footer"></footer>

            </section>

            <section class="page__aside">
                <div class="aside__about">
<div class="aside__about">
    <span class="about__logo" role="img">⚝</span>&nbsp;
    
<h1 class="about__title">The Entropynaut</h1>
<p class="about__description">Hugo Buddelmeijer&rsquo;s website.</p>
</div>


<ul class="aside__social-links">
    
    <li>
        <a href="https://github.com/hugobuddel" rel="me" aria-label="GitHub" title="GitHub"><i class="fa-brands fa-github" aria-hidden="true"></i></a>&nbsp;
    </li>
    
    <li>
        <a href="https://orcid.org/0000-0001-2345-6789" rel="me" aria-label="ORCID" title="ORCID"><i class="ai ai-orcid" aria-hidden="true"></i></a>&nbsp;
    </li>
    
</ul>
</div>
                <hr>
                <div class="aside__content">
    
    
        <p>
            
            2025-01-10
        </p>
    

    

                </div>
            </section>

            <footer class="page__footer"><p>
    
    
    
    
    
    
      
    
      
    
    
    
      
      
          
            
            
                <br/><span class="active">$ echo $LANG<br/><b></b></span><br/>

            
          
      
    
</p>
<br /><br />
<p class="copyright">© Hugo Buddelmeijer</p>
<p class="advertisement">Powered by <a href="https://gohugo.io/">hugo</a> and <a href="https://github.com/joeroe/risotto">risotto</a>.</p>
</footer>

        </div>
    </body>

</html>
